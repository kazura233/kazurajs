"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7556],{1842:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>c,default:()=>u,frontMatter:()=>s,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"react-store","title":"React Store","description":"React Store \u662f\u4e00\u4e2a\u57fa\u4e8e Redux Toolkit \u7684\u72b6\u6001\u7ba1\u7406\u5de5\u5177\u5305\uff0c\u5b83\u63d0\u4f9b\u4e86\u66f4\u7b80\u6d01\u7684 API \u6765\u521b\u5efa\u548c\u7ba1\u7406 Redux store\u3002","source":"@site/docs/react-store.md","sourceDirName":".","slug":"/react-store","permalink":"/kazurajs/docs/react-store","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/react-store.md","tags":[],"version":"current","sidebarPosition":15,"frontMatter":{"sidebar_position":15},"sidebar":"tutorialSidebar","previous":{"title":"React MobX","permalink":"/kazurajs/docs/react-mobx"},"next":{"title":"React Toolkit","permalink":"/kazurajs/docs/react-toolkit"}}');var o=n(6106),i=n(8368);const s={sidebar_position:15},c="React Store",a={},l=[{value:"\u7279\u6027",id:"\u7279\u6027",level:2},{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:2},{value:"\u4f7f\u7528\u65b9\u6cd5",id:"\u4f7f\u7528\u65b9\u6cd5",level:2},{value:"\u521b\u5efa Store",id:"\u521b\u5efa-store",level:3},{value:"\u914d\u7f6e Store",id:"\u914d\u7f6e-store",level:3},{value:"\u5728\u7ec4\u4ef6\u4e2d\u4f7f\u7528",id:"\u5728\u7ec4\u4ef6\u4e2d\u4f7f\u7528",level:3},{value:"API \u53c2\u8003",id:"api-\u53c2\u8003",level:2},{value:"createSlice",id:"createslice",level:3},{value:"\u7c7b\u578b\u5b9a\u4e49",id:"\u7c7b\u578b\u5b9a\u4e49",level:2},{value:"Draft",id:"draft",level:3},{value:"PayloadAction",id:"payloadaction",level:3},{value:"\u6ce8\u610f\u4e8b\u9879",id:"\u6ce8\u610f\u4e8b\u9879",level:2},{value:"\u793a\u4f8b",id:"\u793a\u4f8b",level:2},{value:"\u521b\u5efa\u590d\u6742\u7684 Store",id:"\u521b\u5efa\u590d\u6742\u7684-store",level:3},{value:"\u4f7f\u7528\u51fd\u6570\u5f0f\u66f4\u65b0",id:"\u4f7f\u7528\u51fd\u6570\u5f0f\u66f4\u65b0",level:3},{value:"\u4f7f\u7528\u5bf9\u8c61\u5f0f\u66f4\u65b0",id:"\u4f7f\u7528\u5bf9\u8c61\u5f0f\u66f4\u65b0",level:3},{value:"\u7ec4\u5408\u591a\u4e2a Store",id:"\u7ec4\u5408\u591a\u4e2a-store",level:3}];function d(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"react-store",children:"React Store"})}),"\n",(0,o.jsx)(t.p,{children:"React Store \u662f\u4e00\u4e2a\u57fa\u4e8e Redux Toolkit \u7684\u72b6\u6001\u7ba1\u7406\u5de5\u5177\u5305\uff0c\u5b83\u63d0\u4f9b\u4e86\u66f4\u7b80\u6d01\u7684 API \u6765\u521b\u5efa\u548c\u7ba1\u7406 Redux store\u3002"}),"\n",(0,o.jsx)(t.h2,{id:"\u7279\u6027",children:"\u7279\u6027"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"\u57fa\u4e8e Redux Toolkit \u7684\u72b6\u6001\u7ba1\u7406"}),"\n",(0,o.jsx)(t.li,{children:"\u63d0\u4f9b\u7b80\u6d01\u7684 API \u6765\u521b\u5efa\u548c\u7ba1\u7406 store"}),"\n",(0,o.jsx)(t.li,{children:"\u652f\u6301 TypeScript \u7c7b\u578b\u63a8\u5bfc"}),"\n",(0,o.jsx)(t.li,{children:"\u652f\u6301\u51fd\u6570\u5f0f\u548c\u5bf9\u8c61\u5f0f\u7684\u72b6\u6001\u66f4\u65b0"}),"\n",(0,o.jsx)(t.li,{children:"\u652f\u6301\u72b6\u6001\u5408\u5e76\u548c\u90e8\u5206\u66f4\u65b0"}),"\n",(0,o.jsx)(t.li,{children:"\u8f7b\u91cf\u7ea7\uff0c\u65e0\u4f9d\u8d56"}),"\n"]}),"\n",(0,o.jsx)(t.h2,{id:"\u5b89\u88c5",children:"\u5b89\u88c5"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"npm install @kazura/react-store\n"})}),"\n",(0,o.jsx)(t.h2,{id:"\u4f7f\u7528\u65b9\u6cd5",children:"\u4f7f\u7528\u65b9\u6cd5"}),"\n",(0,o.jsx)(t.h3,{id:"\u521b\u5efa-store",children:"\u521b\u5efa Store"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-typescript",children:"import { createSlice } from '@kazura/react-store'\n\n// \u5b9a\u4e49\u72b6\u6001\u7c7b\u578b\ninterface UserState {\n  name: string\n  age: number\n  isLoggedIn: boolean\n}\n\n// \u521b\u5efa\u521d\u59cb\u72b6\u6001\nconst initialState: UserState = {\n  name: '',\n  age: 0,\n  isLoggedIn: false,\n}\n\n// \u521b\u5efa slice\nconst { reducer, action } = createSlice<UserState>('user', initialState)\n\n// \u521b\u5efa actions\nexport const userActions = {\n  setName: action((name: string) => ({ name })),\n  setAge: action((age: number) => ({ age })),\n  login: action(() => ({ isLoggedIn: true })),\n  logout: action(() => ({ isLoggedIn: false })),\n  updateProfile: action((name: string, age: number) => ({ name, age })),\n  reset: action(() => initialState),\n}\n\nexport { reducer as userReducer }\n"})}),"\n",(0,o.jsx)(t.h3,{id:"\u914d\u7f6e-store",children:"\u914d\u7f6e Store"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-typescript",children:"import { configureStore } from '@reduxjs/toolkit'\nimport { userReducer, userActions } from './user.slice'\n\nconst store = configureStore({\n  reducer: {\n    user: userReducer,\n  },\n})\n\nexport { store, userActions }\n"})}),"\n",(0,o.jsx)(t.h3,{id:"\u5728\u7ec4\u4ef6\u4e2d\u4f7f\u7528",children:"\u5728\u7ec4\u4ef6\u4e2d\u4f7f\u7528"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-typescript",children:"import { useSelector, useDispatch } from 'react-redux'\nimport { userActions } from './user.slice'\n\nfunction UserProfile() {\n  const dispatch = useDispatch()\n  const user = useSelector((state: RootState) => state.user)\n\n  return (\n    <div>\n      <h1>User Profile</h1>\n      <p>Name: {user.name}</p>\n      <p>Age: {user.age}</p>\n      <p>Status: {user.isLoggedIn ? 'Logged In' : 'Logged Out'}</p>\n      <button onClick={() => dispatch(userActions.setName('John'))}>Change Name</button>\n      <button onClick={() => dispatch(userActions.setAge(30))}>Change Age</button>\n      <button onClick={() => dispatch(userActions.login())}>Login</button>\n      <button onClick={() => dispatch(userActions.logout())}>Logout</button>\n    </div>\n  )\n}\n"})}),"\n",(0,o.jsx)(t.h2,{id:"api-\u53c2\u8003",children:"API \u53c2\u8003"}),"\n",(0,o.jsx)(t.h3,{id:"createslice",children:"createSlice"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-typescript",children:"function createSlice<T>(\n  name: string,\n  initialState: T\n): {\n  reducer: Reducer<T>\n  action: <Handel extends (...args: any[]) => Partial<T> | ((state: T) => Partial<T> | void)>(\n    handel: Handel\n  ) => (...args: Parameters<Handel>) => PayloadAction<(state: T) => T | void>\n}\n"})}),"\n",(0,o.jsx)(t.p,{children:"\u521b\u5efa\u4e00\u4e2a Redux slice\u3002"}),"\n",(0,o.jsx)(t.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"name"}),": slice \u540d\u79f0"]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"initialState"}),": \u521d\u59cb\u72b6\u6001"]}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:"\u8fd4\u56de\u503c\uff1a"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"\u5305\u542b reducer \u548c action \u521b\u5efa\u5668\u7684\u5bf9\u8c61"}),"\n"]}),"\n",(0,o.jsx)(t.h2,{id:"\u7c7b\u578b\u5b9a\u4e49",children:"\u7c7b\u578b\u5b9a\u4e49"}),"\n",(0,o.jsx)(t.h3,{id:"draft",children:"Draft"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-typescript",children:"type Draft<T> = {\n  -readonly [P in keyof T]: Draft<T[P]>\n}\n"})}),"\n",(0,o.jsx)(t.p,{children:"\u7528\u4e8e\u521b\u5efa\u53ef\u53d8\u7684\u7c7b\u578b\u3002"}),"\n",(0,o.jsx)(t.h3,{id:"payloadaction",children:"PayloadAction"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-typescript",children:"interface PayloadAction<P = void, T extends string = string> {\n  payload: P\n  type: T\n}\n"})}),"\n",(0,o.jsx)(t.p,{children:"Redux action \u7c7b\u578b\u3002"}),"\n",(0,o.jsx)(t.h2,{id:"\u6ce8\u610f\u4e8b\u9879",children:"\u6ce8\u610f\u4e8b\u9879"}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsx)(t.li,{children:"\u786e\u4fdd\u5728\u4f7f\u7528 store \u4e4b\u524d\u914d\u7f6e\u4e86 Redux store"}),"\n",(0,o.jsx)(t.li,{children:"\u4f7f\u7528 TypeScript \u6765\u83b7\u5f97\u66f4\u597d\u7684\u7c7b\u578b\u63d0\u793a"}),"\n",(0,o.jsx)(t.li,{children:"\u53ef\u4ee5\u4f7f\u7528\u51fd\u6570\u5f0f\u6216\u5bf9\u8c61\u5f0f\u7684\u72b6\u6001\u66f4\u65b0"}),"\n",(0,o.jsx)(t.li,{children:"\u5efa\u8bae\u5c06\u76f8\u5173\u7684 actions \u7ec4\u7ec7\u5728\u4e00\u8d77"}),"\n",(0,o.jsx)(t.li,{children:"\u51fd\u6570\u5f0f\u66f4\u65b0\u53ef\u4ee5\u8bbf\u95ee\u5b8c\u6574\u7684\u72b6\u6001"}),"\n",(0,o.jsx)(t.li,{children:"\u5bf9\u8c61\u5f0f\u66f4\u65b0\u4f1a\u81ea\u52a8\u5408\u5e76\u72b6\u6001"}),"\n",(0,o.jsx)(t.li,{children:"\u8fd4\u56de undefined \u7684\u51fd\u6570\u5f0f\u66f4\u65b0\u4e0d\u4f1a\u6539\u53d8\u72b6\u6001"}),"\n"]}),"\n",(0,o.jsx)(t.h2,{id:"\u793a\u4f8b",children:"\u793a\u4f8b"}),"\n",(0,o.jsx)(t.h3,{id:"\u521b\u5efa\u590d\u6742\u7684-store",children:"\u521b\u5efa\u590d\u6742\u7684 Store"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-typescript",children:"import { createSlice } from '@kazura/react-store'\n\ninterface TodoState {\n  todos: { id: number; text: string; completed: boolean }[]\n  filter: 'all' | 'active' | 'completed'\n}\n\nconst initialState: TodoState = {\n  todos: [],\n  filter: 'all',\n}\n\nconst { reducer, action } = createSlice<TodoState>('todo', initialState)\n\nexport const todoActions = {\n  addTodo: action((text: string) => (state) => ({\n    todos: [...state.todos, { id: Date.now(), text, completed: false }],\n  })),\n  toggleTodo: action((id: number) => (state) => ({\n    todos: state.todos.map((todo) =>\n      todo.id === id ? { ...todo, completed: !todo.completed } : todo\n    ),\n  })),\n  removeTodo: action((id: number) => (state) => ({\n    todos: state.todos.filter((todo) => todo.id !== id),\n  })),\n  setFilter: action((filter: TodoState['filter']) => ({ filter })),\n  clearCompleted: action((state) => ({\n    todos: state.todos.filter((todo) => !todo.completed),\n  })),\n}\n\nexport { reducer as todoReducer }\n"})}),"\n",(0,o.jsx)(t.h3,{id:"\u4f7f\u7528\u51fd\u6570\u5f0f\u66f4\u65b0",children:"\u4f7f\u7528\u51fd\u6570\u5f0f\u66f4\u65b0"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-typescript",children:"import { createSlice } from '@kazura/react-store'\n\ninterface CounterState {\n  count: number\n  history: number[]\n}\n\nconst initialState: CounterState = {\n  count: 0,\n  history: [],\n}\n\nconst { reducer, action } = createSlice<CounterState>('counter', initialState)\n\nexport const counterActions = {\n  increment: action(() => (state) => ({\n    count: state.count + 1,\n    history: [...state.history, state.count + 1],\n  })),\n  decrement: action(() => (state) => ({\n    count: state.count - 1,\n    history: [...state.history, state.count - 1],\n  })),\n  reset: action(() => initialState),\n  setCount: action((count: number) => (state) => ({\n    count,\n    history: [...state.history, count],\n  })),\n}\n\nexport { reducer as counterReducer }\n"})}),"\n",(0,o.jsx)(t.h3,{id:"\u4f7f\u7528\u5bf9\u8c61\u5f0f\u66f4\u65b0",children:"\u4f7f\u7528\u5bf9\u8c61\u5f0f\u66f4\u65b0"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-typescript",children:"import { createSlice } from '@kazura/react-store'\n\ninterface SettingsState {\n  theme: 'light' | 'dark'\n  language: string\n  notifications: boolean\n}\n\nconst initialState: SettingsState = {\n  theme: 'light',\n  language: 'en',\n  notifications: true,\n}\n\nconst { reducer, action } = createSlice<SettingsState>('settings', initialState)\n\nexport const settingsActions = {\n  setTheme: action((theme: SettingsState['theme']) => ({ theme })),\n  setLanguage: action((language: string) => ({ language })),\n  toggleNotifications: action(() => (state) => ({\n    notifications: !state.notifications,\n  })),\n  reset: action(() => initialState),\n}\n\nexport { reducer as settingsReducer }\n"})}),"\n",(0,o.jsx)(t.h3,{id:"\u7ec4\u5408\u591a\u4e2a-store",children:"\u7ec4\u5408\u591a\u4e2a Store"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-typescript",children:"import { configureStore } from '@reduxjs/toolkit'\nimport { userReducer, userActions } from './user.slice'\nimport { todoReducer, todoActions } from './todo.slice'\nimport { counterReducer, counterActions } from './counter.slice'\nimport { settingsReducer, settingsActions } from './settings.slice'\n\nconst store = configureStore({\n  reducer: {\n    user: userReducer,\n    todo: todoReducer,\n    counter: counterReducer,\n    settings: settingsReducer,\n  },\n})\n\nexport { store, userActions, todoActions, counterActions, settingsActions }\n"})})]})}function u(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8368:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>c});var r=n(7378);const o={},i=r.createContext(o);function s(e){const t=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),r.createElement(i.Provider,{value:t},e.children)}}}]);