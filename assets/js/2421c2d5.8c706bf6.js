"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[6396],{639:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>o,frontMatter:()=>d,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"postmsg-builder","title":"PostMsg Builder","description":"PostMsg Builder \u662f\u4e00\u4e2a\u7528\u4e8e\u6784\u5efa\u548c\u5904\u7406 postMessage \u901a\u4fe1\u7684\u5de5\u5177\u5305\uff0c\u63d0\u4f9b\u4e86\u7c7b\u578b\u5b89\u5168\u548c\u4fbf\u6377\u7684 API\u3002","source":"@site/docs/postmsg-builder.md","sourceDirName":".","slug":"/postmsg-builder","permalink":"/kazurajs/docs/postmsg-builder","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/postmsg-builder.md","tags":[],"version":"current","sidebarPosition":12,"frontMatter":{"sidebar_position":12},"sidebar":"tutorialSidebar","previous":{"title":"Web PostMsg","permalink":"/kazurajs/docs/web-postmsg"},"next":{"title":"React Hooks","permalink":"/kazurajs/docs/react-hooks"}}');var l=r(6106),i=r(9287);const d={sidebar_position:12},c="PostMsg Builder",t={},a=[{value:"\u7279\u6027",id:"\u7279\u6027",level:2},{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:2},{value:"\u4f7f\u7528\u65b9\u6cd5",id:"\u4f7f\u7528\u65b9\u6cd5",level:2},{value:"\u57fa\u672c\u4f7f\u7528",id:"\u57fa\u672c\u4f7f\u7528",level:3},{value:"iframe \u901a\u4fe1",id:"iframe-\u901a\u4fe1",level:3},{value:"window.open \u901a\u4fe1",id:"windowopen-\u901a\u4fe1",level:3},{value:"\u6279\u91cf\u8bbe\u7f6e\u76d1\u542c\u5668",id:"\u6279\u91cf\u8bbe\u7f6e\u76d1\u542c\u5668",level:3},{value:"API \u53c2\u8003",id:"api-\u53c2\u8003",level:2},{value:"PostMsgBuilder",id:"postmsgbuilder",level:3},{value:"constructor",id:"constructor",level:4},{value:"setChannel",id:"setchannel",level:4},{value:"setReceiver",id:"setreceiver",level:4},{value:"setIFrameReceiver",id:"setiframereceiver",level:4},{value:"setListeners",id:"setlisteners",level:4},{value:"setListener",id:"setlistener",level:4},{value:"deleteListener",id:"deletelistener",level:4},{value:"setReceiveAllChannel",id:"setreceiveallchannel",level:4},{value:"build",id:"build",level:4},{value:"createChildIFrameReceiver",id:"createchildiframereceiver",level:4},{value:"loadURL",id:"loadurl",level:4},{value:"createParentIFrameReceiver",id:"createparentiframereceiver",level:4},{value:"createChildOpenerReceiver",id:"createchildopenerreceiver",level:4},{value:"open",id:"open",level:4},{value:"createParentOpenerReceiver",id:"createparentopenerreceiver",level:4},{value:"destroy",id:"destroy",level:4},{value:"\u6ce8\u610f\u4e8b\u9879",id:"\u6ce8\u610f\u4e8b\u9879",level:2},{value:"\u793a\u4f8b",id:"\u793a\u4f8b",level:2},{value:"\u7236\u5b50\u7a97\u53e3\u901a\u4fe1",id:"\u7236\u5b50\u7a97\u53e3\u901a\u4fe1",level:3},{value:"\u7a97\u53e3\u901a\u4fe1",id:"\u7a97\u53e3\u901a\u4fe1",level:3},{value:"\u6279\u91cf\u76d1\u542c\u5668",id:"\u6279\u91cf\u76d1\u542c\u5668",level:3}];function h(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"postmsg-builder",children:"PostMsg Builder"})}),"\n",(0,l.jsx)(n.p,{children:"PostMsg Builder \u662f\u4e00\u4e2a\u7528\u4e8e\u6784\u5efa\u548c\u5904\u7406 postMessage \u901a\u4fe1\u7684\u5de5\u5177\u5305\uff0c\u63d0\u4f9b\u4e86\u7c7b\u578b\u5b89\u5168\u548c\u4fbf\u6377\u7684 API\u3002"}),"\n",(0,l.jsx)(n.h2,{id:"\u7279\u6027",children:"\u7279\u6027"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u652f\u6301 iframe \u548c window.open \u901a\u4fe1"}),"\n",(0,l.jsx)(n.li,{children:"\u652f\u6301\u7236\u5b50\u7a97\u53e3\u901a\u4fe1"}),"\n",(0,l.jsx)(n.li,{children:"\u652f\u6301\u81ea\u5b9a\u4e49\u901a\u4fe1\u6e20\u9053"}),"\n",(0,l.jsx)(n.li,{children:"\u652f\u6301\u6279\u91cf\u8bbe\u7f6e\u76d1\u542c\u5668"}),"\n",(0,l.jsx)(n.li,{children:"\u652f\u6301\u52a8\u6001\u52a0\u8f7d iframe \u5185\u5bb9"}),"\n",(0,l.jsx)(n.li,{children:"\u652f\u6301\u81ea\u52a8\u6e05\u7406\u8d44\u6e90"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u5b89\u88c5",children:"\u5b89\u88c5"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"npm install @kazura/postmsg-builder\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u4f7f\u7528\u65b9\u6cd5",children:"\u4f7f\u7528\u65b9\u6cd5"}),"\n",(0,l.jsx)(n.h3,{id:"\u57fa\u672c\u4f7f\u7528",children:"\u57fa\u672c\u4f7f\u7528"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"import PostMsgBuilder from '@kazura/postmsg-builder'\n\n// \u521b\u5efa\u6784\u5efa\u5668\nconst builder = new PostMsgBuilder()\n\n// \u8bbe\u7f6e\u63a5\u6536\u8005\nbuilder.setReceiver(window.parent)\n\n// \u8bbe\u7f6e\u76d1\u542c\u5668\nbuilder.setListener('message', (data) => {\n  console.log('Received:', data)\n})\n\n// \u6784\u5efa WebPostMsg \u5b9e\u4f8b\nconst postMsg = builder.build()\n"})}),"\n",(0,l.jsx)(n.h3,{id:"iframe-\u901a\u4fe1",children:"iframe \u901a\u4fe1"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"// \u7236\u7a97\u53e3\nconst parentBuilder = new PostMsgBuilder()\n\n// \u521b\u5efa\u5b50 iframe\nparentBuilder.createChildIFrameReceiver({\n  container: document.body,\n  className: 'my-iframe',\n  url: 'https://child.example.com',\n})\n\n// \u52a0\u8f7d URL\nparentBuilder.loadURL('https://child.example.com')\n\n// \u5b50\u7a97\u53e3\nconst childBuilder = new PostMsgBuilder()\nchildBuilder.createParentIFrameReceiver()\n"})}),"\n",(0,l.jsx)(n.h3,{id:"windowopen-\u901a\u4fe1",children:"window.open \u901a\u4fe1"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"// \u7236\u7a97\u53e3\nconst parentBuilder = new PostMsgBuilder()\n\n// \u6253\u5f00\u5b50\u7a97\u53e3\nparentBuilder.createChildOpenerReceiver({\n  url: 'https://child.example.com',\n  features: 'width=800,height=600',\n})\n\n// \u5b50\u7a97\u53e3\nconst childBuilder = new PostMsgBuilder()\nchildBuilder.createParentOpenerReceiver()\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u6279\u91cf\u8bbe\u7f6e\u76d1\u542c\u5668",children:"\u6279\u91cf\u8bbe\u7f6e\u76d1\u542c\u5668"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"const builder = new PostMsgBuilder()\n\n// \u6279\u91cf\u8bbe\u7f6e\u76d1\u542c\u5668\nbuilder.setListeners(\n  new Map([\n    ['message', (data) => console.log('Message:', data)],\n    ['error', (error) => console.error('Error:', error)],\n  ])\n)\n\n// \u8bbe\u7f6e\u5355\u4e2a\u76d1\u542c\u5668\nbuilder.setListener('custom', (data) => console.log('Custom:', data))\n\n// \u5220\u9664\u76d1\u542c\u5668\nbuilder.deleteListener('custom')\n"})}),"\n",(0,l.jsx)(n.h2,{id:"api-\u53c2\u8003",children:"API \u53c2\u8003"}),"\n",(0,l.jsx)(n.h3,{id:"postmsgbuilder",children:"PostMsgBuilder"}),"\n",(0,l.jsx)(n.h4,{id:"constructor",children:"constructor"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"constructor(options?: Partial<PostMsgAPIOptions>)\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u521b\u5efa\u4e00\u4e2a PostMsgBuilder \u5b9e\u4f8b\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"options"}),": \u53ef\u9009\u7684\u914d\u7f6e\u9009\u9879"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"setchannel",children:"setChannel"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"private setChannel(channel: string): void\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u8bbe\u7f6e\u901a\u4fe1\u6e20\u9053\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"channel"}),": \u6e20\u9053\u540d\u79f0"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"setreceiver",children:"setReceiver"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"setReceiver(receiver: Window): PostMsgBuilder\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u8bbe\u7f6e\u63a5\u6536\u8005\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"receiver"}),": \u63a5\u6536\u8005\u7a97\u53e3"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u8fd4\u56de\u503c\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"PostMsgBuilder \u5b9e\u4f8b"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"setiframereceiver",children:"setIFrameReceiver"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"setIFrameReceiver(iframe: HTMLIFrameElement): PostMsgBuilder\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u8bbe\u7f6e iframe \u63a5\u6536\u8005\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"iframe"}),": iframe \u5143\u7d20"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u8fd4\u56de\u503c\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"PostMsgBuilder \u5b9e\u4f8b"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"setlisteners",children:"setListeners"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"setListeners(listeners: Map<string, Listener>): PostMsgBuilder\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u6279\u91cf\u8bbe\u7f6e\u76d1\u542c\u5668\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"listeners"}),": \u76d1\u542c\u5668\u6620\u5c04"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u8fd4\u56de\u503c\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"PostMsgBuilder \u5b9e\u4f8b"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"setlistener",children:"setListener"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"setListener(type: string, listener: Listener): PostMsgBuilder\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u8bbe\u7f6e\u5355\u4e2a\u76d1\u542c\u5668\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"type"}),": \u6d88\u606f\u7c7b\u578b"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"listener"}),": \u76d1\u542c\u5668\u51fd\u6570"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u8fd4\u56de\u503c\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"PostMsgBuilder \u5b9e\u4f8b"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"deletelistener",children:"deleteListener"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"deleteListener(type: string): PostMsgBuilder\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u5220\u9664\u76d1\u542c\u5668\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"type"}),": \u6d88\u606f\u7c7b\u578b"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u8fd4\u56de\u503c\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"PostMsgBuilder \u5b9e\u4f8b"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"setreceiveallchannel",children:"setReceiveAllChannel"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"setReceiveAllChannel(receiveAllChannel: boolean): PostMsgBuilder\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u8bbe\u7f6e\u662f\u5426\u63a5\u6536\u6240\u6709\u6e20\u9053\u7684\u6d88\u606f\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"receiveAllChannel"}),": \u662f\u5426\u63a5\u6536\u6240\u6709\u6e20\u9053\u7684\u6d88\u606f"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u8fd4\u56de\u503c\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"PostMsgBuilder \u5b9e\u4f8b"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"build",children:"build"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"build(): WebPostMsg\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u6784\u5efa WebPostMsg \u5b9e\u4f8b\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u8fd4\u56de\u503c\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"WebPostMsg \u5b9e\u4f8b"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"createchildiframereceiver",children:"createChildIFrameReceiver"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"createChildIFrameReceiver(iframe: HTMLIFrameElement): PostMsgBuilder\ncreateChildIFrameReceiver(options: ParentIFrameReceiverOptions): PostMsgBuilder\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u521b\u5efa\u5b50 iframe \u63a5\u6536\u8005\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"iframe"}),": iframe \u5143\u7d20\u6216\u914d\u7f6e\u9009\u9879"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u8fd4\u56de\u503c\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"PostMsgBuilder \u5b9e\u4f8b"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"loadurl",children:"loadURL"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"loadURL(url: string): PostMsgBuilder\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u52a0\u8f7d iframe URL\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"url"}),": \u8981\u52a0\u8f7d\u7684 URL"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u8fd4\u56de\u503c\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"PostMsgBuilder \u5b9e\u4f8b"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"createparentiframereceiver",children:"createParentIFrameReceiver"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"createParentIFrameReceiver(): PostMsgBuilder\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u521b\u5efa\u7236 iframe \u63a5\u6536\u8005\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u8fd4\u56de\u503c\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"PostMsgBuilder \u5b9e\u4f8b"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"createchildopenerreceiver",children:"createChildOpenerReceiver"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"createChildOpenerReceiver(receiver: Window, name: string): PostMsgBuilder\ncreateChildOpenerReceiver(options: ParentOpenerReceiverOptions): PostMsgBuilder\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u521b\u5efa\u5b50 opener \u63a5\u6536\u8005\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"receiver"}),": \u63a5\u6536\u8005\u7a97\u53e3\u6216\u914d\u7f6e\u9009\u9879"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"name"}),": \u6e20\u9053\u540d\u79f0\uff08\u5f53\u4f7f\u7528 receiver \u53c2\u6570\u65f6\uff09"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u8fd4\u56de\u503c\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"PostMsgBuilder \u5b9e\u4f8b"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"open",children:"open"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"open(url: string, features?: string): PostMsgBuilder\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u6253\u5f00\u65b0\u7a97\u53e3\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"url"}),": \u8981\u6253\u5f00\u7684 URL"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"features"}),": \u7a97\u53e3\u7279\u6027"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u8fd4\u56de\u503c\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"PostMsgBuilder \u5b9e\u4f8b"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"createparentopenerreceiver",children:"createParentOpenerReceiver"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"createParentOpenerReceiver(): PostMsgBuilder\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u521b\u5efa\u7236 opener \u63a5\u6536\u8005\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u8fd4\u56de\u503c\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"PostMsgBuilder \u5b9e\u4f8b"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"destroy",children:"destroy"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"destroy(): PostMsgBuilder\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u9500\u6bc1\u5b9e\u4f8b\uff0c\u6e05\u7406\u8d44\u6e90\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u8fd4\u56de\u503c\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"PostMsgBuilder \u5b9e\u4f8b"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u6ce8\u610f\u4e8b\u9879",children:"\u6ce8\u610f\u4e8b\u9879"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"\u786e\u4fdd\u6b63\u786e\u8bbe\u7f6e\u901a\u4fe1\u6e20\u9053"}),"\n",(0,l.jsx)(n.li,{children:"\u6ce8\u610f\u5904\u7406\u8de8\u57df\u901a\u4fe1\u7684\u5b89\u5168\u9650\u5236"}),"\n",(0,l.jsx)(n.li,{children:"\u53ca\u65f6\u6e05\u7406\u4e0d\u9700\u8981\u7684\u76d1\u542c\u5668"}),"\n",(0,l.jsx)(n.li,{children:"\u4f7f\u7528 destroy \u65b9\u6cd5\u6e05\u7406\u8d44\u6e90"}),"\n",(0,l.jsx)(n.li,{children:"\u6ce8\u610f\u5904\u7406\u901a\u4fe1\u9519\u8bef\u548c\u5f02\u5e38\u60c5\u51b5"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u793a\u4f8b",children:"\u793a\u4f8b"}),"\n",(0,l.jsx)(n.h3,{id:"\u7236\u5b50\u7a97\u53e3\u901a\u4fe1",children:"\u7236\u5b50\u7a97\u53e3\u901a\u4fe1"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"// \u7236\u7a97\u53e3\nconst parentBuilder = new PostMsgBuilder()\n\n// \u521b\u5efa\u5b50 iframe\nparentBuilder\n  .createChildIFrameReceiver({\n    container: document.body,\n    className: 'child-iframe',\n    url: 'https://child.example.com',\n  })\n  .setListener('message', (data) => {\n    console.log('Received from child:', data)\n  })\n  .build()\n\n// \u5b50\u7a97\u53e3\nconst childBuilder = new PostMsgBuilder()\n  .createParentIFrameReceiver()\n  .setListener('message', (data) => {\n    console.log('Received from parent:', data)\n  })\n  .build()\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u7a97\u53e3\u901a\u4fe1",children:"\u7a97\u53e3\u901a\u4fe1"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"// \u7236\u7a97\u53e3\nconst parentBuilder = new PostMsgBuilder()\n\n// \u6253\u5f00\u5b50\u7a97\u53e3\nparentBuilder\n  .createChildOpenerReceiver({\n    url: 'https://child.example.com',\n    features: 'width=800,height=600',\n  })\n  .setListener('message', (data) => {\n    console.log('Received from child:', data)\n  })\n  .build()\n\n// \u5b50\u7a97\u53e3\nconst childBuilder = new PostMsgBuilder()\n  .createParentOpenerReceiver()\n  .setListener('message', (data) => {\n    console.log('Received from parent:', data)\n  })\n  .build()\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u6279\u91cf\u76d1\u542c\u5668",children:"\u6279\u91cf\u76d1\u542c\u5668"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"const builder = new PostMsgBuilder()\n\n// \u6279\u91cf\u8bbe\u7f6e\u76d1\u542c\u5668\nbuilder\n  .setListeners(\n    new Map([\n      ['message', (data) => console.log('Message:', data)],\n      ['error', (error) => console.error('Error:', error)],\n      ['custom', (data) => console.log('Custom:', data)],\n    ])\n  )\n  .build()\n\n// \u5220\u9664\u4e0d\u9700\u8981\u7684\u76d1\u542c\u5668\nbuilder.deleteListener('custom')\n"})})]})}function o(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},9287:(e,n,r)=>{r.d(n,{R:()=>d,x:()=>c});var s=r(7378);const l={},i=s.createContext(l);function d(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:d(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);